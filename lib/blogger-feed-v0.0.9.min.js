"use strict";(()=>{var E="__deox_blogger_feed_jsonp_callbacks__",b={post:{error:"The post was not found.",code:"post_not_found"},page:{error:"The page was not found.",code:"page_not_found"},comment:{error:"The comment was not found.",code:"comment_not_found"},blog:{error:"The blog was not found.",code:"blog_not_found"}};var k=class extends Error{constructor(t,n){super(t,n),this.name="SDKError"}},L=class extends k{constructor(t,n){super(t,n),this.name="SDKTypeError"}},P=class extends k{constructor(t,n,r){super(t,r),this.name="SDKRequestError",this.url=String(n)}},f=class extends k{constructor(t,n){super(t.error,n),this.name="SDKInputNotFoundError",this.error=t.error,this.code=t.code}};var V=e=>Object.prototype.toString.call(e).replace(/(?:^\[object\s(.*?)\]$)/,"$1"),u=e=>typeof e=="string";var N=e=>typeof e=="undefined";var h=e=>Array.isArray?Array.isArray(e):V(e)==="Array";var W=e=>typeof e=="object"&&e!==null,x=e=>W(e)&&!h(e);var X=(e,...t)=>{let n=e;for(let r=0;r<t.length;r+=1){if(!n||!Object.prototype.hasOwnProperty.call(n,t[r]))return{exists:!1,value:void 0};n=n[t[r]]}return{exists:!0,value:n}},a=(e,...t)=>X(e,...t).value,Y=e=>Object.keys(e).reduce((t,n)=>{let r=e[n];return t[n]={value:r},t},{}),G=(e,t,n)=>(n&&Object.assign(e,n),Object.defineProperties(e,Y(t)),e),y={s(e,t){if(!u(e))throw new L(`${t} must be of type string, current type is ${typeof e}`)},nE(e,t){if(this.s(e,t),e.length===0)throw new L(`${t} cannot be an empty string`)},nB(e,t){if(this.s(e,t),e.trim().length===0)throw new L(`${t} cannot be a blank string`)}};var w=class{constructor(t){this.c=t}_p(t,n){var s;let r={itemsPerPage:n.itemsPerPage,startIndex:n.startIndex,totalResults:n.totalResults,selfUrl:n.selfUrl,previousUrl:n.previousUrl,nextUrl:n.nextUrl,previous:async({signal:o}={})=>{if(r.previousUrl){let i=await this.c.req(r.previousUrl,{signal:o});return this._p(t,i)}return null},next:async({signal:o}={})=>{if(r.nextUrl){let i=await this.c.req(r.nextUrl,{signal:o});return this._p(t,i)}return null}};return G((s=t==="comments"?n.comments:n.posts)!=null?s:[],r)}};var U=class extends w{async get({signal:t}={}){let{blog:n}=await this.c.req("./posts/summary",{params:{maxResults:0},signal:t});if(!n)throw new f(b.blog);return n}};var K=(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx")=>{let t=new Date().getTime(),n=typeof performance!="undefined"&&performance.now&&performance.now()*1e3||0;return e.replace(/[xy]/g,r=>{let s=Math.random()*16;return t>0?(s=(t+s)%16|0,t=Math.floor(t/16)):(s=(n+s)%16|0,n=Math.floor(n/16)),(r==="x"?s:s&3|8).toString(16)})};var c=null,$=e=>{var s;let t={},n=[],r=c;if(h(e)&&e.length>0)for(let o=0;o<e.length;o+=1){let i=e[o],l=a(i,"rel"),m=a(i,"href"),p=a(i,"type"),d=a(i,"title");if(u(l)&&u(m)){h(t[l])||(t[l]=[]);let g={rel:l,href:m,type:u(p)?p:c,title:u(d)?d:c};(s=t[l])==null||s.push(g),n.push(g),l==="alternate"&&p==="text/html"&&(r=m)}}return{alternate:r,links:t,array:n}},tt=e=>{let t={self:c,previous:c,next:c},n=Object.keys(t),{array:r}=$(a(e,"link"));for(let s=0;s<r.length;s+=1){let{rel:o,href:i,type:l}=r[s];if(l!=="text/html")for(let m of n)o===m&&(t[m]=i)}return t},H=e=>{let t=[];if(h(e)&&e.length>0)for(let n=0;n<e.length;n+=1){let r=e[n],s=a(r,"term");u(s)&&t.push(s)}return t},et=e=>{let[t,n,r]=["georss$box","georss$featurename","georss$point"].map(s=>{let o=a(e,s,"$t");return u(o)?o:c});return{box:t,featureName:n,point:r}},nt=e=>{let t={feed:c,number:c,title:c},{links:{replies:n}}=$(e);if(n)for(let{title:r,type:s,href:o}of n)if(s==="text/html"&&u(r)){let i=r.match(/\d+/);t.title=r,t.number=i!=null&&i[0]?Number.parseInt(i[0],10):0}else s==="application/atom+xml"&&u(o)&&(t.feed=o);return t},C=e=>{let t=[];if(h(e)&&e.length>0)for(let n=0;n<e.length;n+=1){let r=e[0],s=a(r,"name","$t"),o=a(r,"uri","$t"),i=a(r,"gd$image","src"),l=u(s)?s:"Unknown",m=u(i)&&i.trim().toLowerCase()!=="https://img1.blogblog.com/img/b16-rounded.gif"?i:c,p=u(o)?o:c;t.push({name:l,url:p,image:m,public:p!==c})}return t},rt=e=>{let t={class:c,time:c,removed:!1},n=a(e,"gd$extendedProperty");if(x(e)&&h(n)&&n.length>0)for(let r=0;r<n.length;r+=1){let s=n[r]||{},{name:o,value:i}=s;if(u(o)&&u(i)){let m={"blogger.itemClass":["class",i],"blogger.displayTime":["time",i],"blogger.contentRemoved":["removed",i==="true"]}[o];if(h(m)){let[p,d]=m;p in t&&(t[p]=d)}}}return t},st=e=>{let t=a(e,"content","$t"),n=a(e,"summary","$t"),r=a(e,"media$thumbnail","url"),s=c;u(t)?s=t:u(n)&&(s=n);let o=u(r)?r:c,i=[o,o];if(o!==c)return i;let l=s?/<img +(.*?)src=([""])([^""]+?)([""])(.*?) *\/?>/i.exec(s):c;return l!=null&&l[3]&&(i[1]=l[3]),i},ot=e=>{let t=a(e,"openSearch$itemsPerPage","$t");return u(t)?Number(t):c},it=e=>{let t=a(e,"openSearch$startIndex","$t");return u(t)?Number(t):c},at=e=>{let t=a(e,"openSearch$totalResults","$t");return u(t)?Number(t):c},lt=e=>{let t=a(e,"id","$t"),n=a(e,"title","$t"),r=a(e,"subtitle","$t"),s=a(e,"updated","$t"),o=a(e,"link"),{alternate:i,links:l}=$(o);if(x(e)&&u(t)&&u(n)&&u(s)&&u(i)){let m=a(e,"category");return{id:t.replace(/^.*blog-(\d+).*$/,"$1"),title:n,subtitle:u(r)?r:c,labels:H(m),url:i,links:l,updated:s,author:C(a(e,"author"))[0]}}return c},ut=e=>{let t=a(e,"id","$t"),n=a(e,"title","$t"),r=a(e,"published","$t"),s=a(e,"updated","$t"),o=a(e,"summary","$t"),i=a(e,"content","$t"),l=a(e,"link"),{alternate:m,links:p}=$(l);if(x(e)&&u(m)&&u(t)&&u(n)&&u(r)&&u(s)){let[d,g]=st(e);return{id:t.replace(/^.*(?:page|post)-(\d+)$/,"$1"),title:n,published:r,updated:s,labels:H(a(e,"category")),url:m,links:p,author:C(a(e,"author"))[0],thumbnail:d,thumbnailAlt:g,summary:u(o)?o:c,content:u(i)?i:c,comments:nt(l),geo:et(e)}}return c},ct=e=>{var O,j;let t=a(e,"id","$t"),n=a(e,"title","$t"),r=a(e,"published","$t"),s=a(e,"updated","$t"),o=a(e,"thr$in-reply-to"),i=a(o,"href"),l=a(o,"ref"),m=a(e,"summary","$t"),p=a(e,"content","$t"),d=a(e,"link"),{alternate:g,links:S}=$(d);if(x(e)&&u(g)&&u(t)&&u(n)&&u(r)&&u(s)&&u(i)&&u(l)){let M=(O=S.related)==null?void 0:O[0].href.match(/\/feeds\/(.*)\/comments\/[^/]+\/(\d+)/);return{title:n,published:r,updated:s,url:g,links:S,author:C(a(e,"author"))[0],summary:u(m)?m:c,content:u(p)?p:c,extended:rt(e),id:t.replace(/^.*(?:page|post)-(\d+)$/,"$1"),post:{id:l.replace(/^.*(?:page|post)-(\d+)$/,"$1"),url:i.split("?")[0]},inReplyTo:(j=M==null?void 0:M[2])!=null?j:c}}return c},mt=e=>{let t=c,n=c;if(h(e)&&(t=[],n=[],e.length>0))for(let r=0;r<e.length;r+=1){let s=e[r];if(x(s))if("thr$in-reply-to"in s){let o=ct(s);o&&n.push(o)}else{let o=ut(s);o&&t.push(o)}}return{posts:t,comments:n}},J=(e,t)=>{let{posts:n,comments:r}=mt(e),s=tt(t);return{blog:lt(t),links:$(a(t,"link")).links,posts:n,comments:r,itemsPerPage:ot(t),startIndex:it(t),totalResults:at(t),selfUrl:s.self,previousUrl:s.previous,nextUrl:s.next}},z=e=>h(e)?e:x(e)?[e]:c,v=e=>{let t=a(e,"feed");if(x(t)){let r=a(t,"entry");return J(z(r),t)}let n=a(e,"entry");return J(z(n))};var T=class extends URL{constructor(t,n,r={}){super(t,n);let{searchParams:s}=this;r.clearParams&&s.forEach((i,l,m)=>m.delete(l));let o=(i,l)=>{["string","boolean","number"].includes(typeof l)&&s.append(i,String(l))};if(x(r.params)){let i=r.params;for(let l in i){let m=i[l];if(Array.isArray(m))for(let p of m)o(l,p);else o(l,m)}}}},_={},pt=async(e,t)=>{var i,l;(l=window[i=E])!=null||(window[i]=_);let n=`callback_${K("xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx")}`,r=`window.${E}.${n}`,s=e({callback:r,id:n}),o=document.createElement("script");return o.async=!0,t&&Object.assign(o,t),o.src=String(s),new Promise((m,p)=>{_[n]=d=>{delete _[n],m(d)},o.onerror=d=>{delete _[n],p(new k(typeof d=="string"?d:`Failed to load script from ${o.src}`))},document.head.appendChild(o)})},dt=async(e,{signal:t}={})=>{var s,o,i;let n=await fetch(e,{signal:t}).catch(l=>{throw new P("Fetch to JSON",String(e),{cause:l})});if(!n.ok)throw await((s=n.body)==null?void 0:s.cancel()),new P(`Failed to fetch ${n.url} (status: ${n.status})`,n.url);let r=(o=n.headers.get("Content-Type"))==null?void 0:o.includes("application/json");if(!r)throw await((i=n.body)==null?void 0:i.cancel()),new P(`Response was success but Content-Type '${r}' is not supported`,n.url);return await n.json()},Q=async(e,{params:t,include:n,exclude:r,baseUrl:s,jsonp:o,signal:i}={})=>{let l={},m={maxResults:"max-results",startIndex:"start-index",orderBy:"orderby",publishedMin:"published-min",publishedMax:"published-max",updatedMin:"updated-min",updatedMax:"updated-max",sort:"sort",query:"q"};if(t)for(let g in t){let S=t[g];if(g in m){let O=!0;n&&(O=n.includes(g)),r&&(O=!r.includes(g)),O&&(l[m[g]]=S instanceof Date?S.toISOString():String(S))}}l.alt="json",l.redirect=!1;let p=new T(e,s,{params:l}),d=await(o?pt(({callback:g})=>new T(p,void 0,{params:{callback:g}})):dt(p,{signal:i}));return v(d)};var Z=e=>e.endsWith("/")?e:`${e}/`,q=e=>`https://www.blogger.com/feeds/${e}/`,B=e=>`${Z(e)}feeds/`,A=class{constructor(t,n={}){if(u(t)&&/^\d{12,24}$/.test(t))this._bI=t,this.base=q(t);else{let r=null;if(t instanceof URL)r=t;else if(typeof t=="string")try{r=new URL(/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//.test(t)?t:`https://${t}`)}catch(s){}if(!r)throw new Error("Argument 'urlOrId' is not a valid blogger blog url or blog id");if(!/^https?:$/i.test(r.protocol))throw new Error(`Argument 'urlOrId' has unsupported protocol '${r.protocol}'`);this._bU=Z(r.origin),this.base=B(r.origin)}if(this.jsonp=n.jsonp===!0,this.jsonp&&(typeof window!="object"||typeof document!="object"))throw new Error("options.jsonp is set to true but current environment does't support it, please set it to false to use json")}get blog(){return(async()=>{var n;let{blog:t}=await this.req("./posts/summary",{params:{maxResults:0}});if(!t)throw new f(b.blog);return(n=this._)!=null||(this._={id:t.id,url:t.url,serviceBase:q(t.id),domainBase:B(t.url)}),this._})()}get id(){return(async()=>{var t;return(t=this._bI)!=null||(this._bI=(await this.blog).id),this._bI})()}get url(){return(async()=>{var t;return(t=this._bU)!=null||(this._bU=(await this.blog).url),this._bU})()}get domainBase(){return(async()=>B(await this.url))()}get serviceBase(){return(async()=>q(await this.id))()}async req(t,n){return Q(t,{baseUrl:this.base,jsonp:this.jsonp,...n})}};var F=class extends w{async list(t={},{signal:n}={}){let{postId:r}=t;N(r)||y.nB(r,"options.postId");let s=await this.c.req(`./${r?`${encodeURI(r)}/`:""}comments/${t.summary===!0?"summary":"default"}`,{params:t,exclude:["query"],signal:n});return r&&s.comments&&(s.comments=s.comments.filter(o=>o.post.id===r)),this._p("comments",s)}async get(t,n,r={},{signal:s}={}){y.nB(t,"Argument 'postId'"),y.nB(n,"Argument 'commentId'");let{comments:o}=await this.c.req(`./${encodeURI(t)}/comments/${r.summary===!0?"summary":"default"}/${encodeURI(n)}`,{baseUrl:await this.c.serviceBase,exclude:["query"],signal:s}),i=o==null?void 0:o.find(l=>l.id===n);if(!i)throw new f(b.comment);return i}};var D=class extends w{async list(t={},{signal:n}={}){let r=await this.c.req(`./pages/${t.summary===!0?"summary":"default"}`,{params:t,exclude:["query"],signal:n});return this._p("posts",r)}async get(t,n={},{signal:r}={}){y.nB(t,"Argument 'pageId'");let{posts:s}=await this.c.req(`./pages/${n.summary===!0?"summary":"default"}/${encodeURI(t)}`,{exclude:["query"],signal:r}),o=s==null?void 0:s.find(i=>i.id===t);if(!o)throw new f(b.page);return o}};var I=class extends w{async list(t={},{signal:n}={}){let{label:r}=t;N(r)||y.nB(r,"options.label");let s=await this.c.req(`./posts/${t.summary===!0?"summary":"default"}${r?`/-/${encodeURI(r)}`:""}`,{params:t,exclude:["query"],signal:n});return this._p("posts",s)}async get(t,n={},{signal:r}={}){y.nB(t,"Argument 'postId'");let{posts:s}=await this.c.req(`./posts/${n.summary===!0?"summary":"default"}/${encodeURIComponent(t)}`,{exclude:["query"],signal:r}),o=s==null?void 0:s.find(i=>i.id===t);if(!o)throw new f(b.post);return o}async query(t,n={},{signal:r}={}){y.nB(t,"Argument 'query'");let s=await this.c.req(`./posts/${n.summary===!0?"summary":"default"}`,{params:{...n,query:t},signal:r});return this._p("posts",s)}};var R=class{constructor(t,n={}){let r=new A(t,n);this.posts=new I(r),this.pages=new D(r),this.comments=new F(r),this.blog=new U(r)}};R.SDKError=k,R.SDKInputNotFoundError=f,R.SDKRequestError=P,R.SDKTypeError=L,R.parseFeed=v;var gt=()=>typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:self,ft="BloggerFeed";gt()[ft]=R;})();
